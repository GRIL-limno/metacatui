
<% 
	if (typeof southBoundCoord != "undefined"){
		print('<div class="result-row view-link pointer open-marker" data-id="'+id+'">');
	}
	else{
		print('<div class="result-row view-link pointer" data-id="'+id+'">');
	}
%>
        <div class="span1 info-icons">
			
        		<div class="on-map">
					<% 
						if (typeof southBoundCoord != "undefined"){
		               		print('<i class="icon-map-marker on-map"></i>');
		               }
		               else{
		               		print('<i class="icon-map-marker inactive"></i>');
		               }
		            %>
	            </div>
	        
	        
	        <% if((typeof abstract == 'undefined') || (abstract == "")){ 
           			print('<div class="show-abstract">');
           			print('<i class="icon-info-sign inactive"></i>');
           			print('</div>');
           		} 
           		else{	        
           			var safeAbstract = abstract.replace(/\"/g, "'");   		
           			print('<div class="show-abstract popover-this stop-route prevent-popover-runoff" data-placement="left" data-trigger="hover" data-title="Abstract" data-container="body" data-content="' + safeAbstract + '">');
           			print('<i class="icon-info-sign show-abstract more-info stop-route"></i>');
           			print('</div>');
           		 } 
              %>
	       
	   </div>
	   <div class="span1 stop-route download">
	              
	               <%
		           if (resourceMap) {
						// handle multiple resourceMaps		
						print('<a class="dropdown-toggle download btn stop-route" data-toggle="dropdown" href="#" alt="Download"><i class="icon-folder-open download stop-route"></i><i class="icon-caret-down stop-route"></i></a>');
					    print('<ul class="dropdown-menu download stop-route">');
					    var cnt = 1;
					    _.each(resourceMap, function(resourceMapId) {
							print('<li class="stop-route">');
							print('<a href="', package_service, resourceMapId, '" title="', resourceMapId ,'" class="stop-route">', 'Package ', cnt, '</a>');
							print('</li>'); 	 
						});
					    print('</ul>');
					}
			        else{
			            print('<i class="icon-folder-open inactive"></i>');
			        }
	           		%>
	           
        </div>      
        <div class="result-citation span9">
              <span class="result-author">
              <% var count=0; _.each(origin, function(author) {
                   count++;
                   if (count > 1) {
                       print(", ")
             }
                   if (count > 1 && count == origin.length) {
                       print("and ")
             }
                   print(author)
                   if (count == origin.length) {
                       print(". ")
             }
               }) %></span>
               <span class="result-pubdate"> <% if(pubDate) { 
                   print(moment(pubDate).format('YYYY'), '. ')
               } else {
                   print(moment(dateUploaded).format('YYYY'), '. ')
               } %></span>
               <span class="result-title"> <% if (title) { print('<a class=\"view_link\" href=\"#view/', id, '\" pid=\"', id, '\">', title, '.</a> '); } %></span>
               <span class="result-id subtle"> <%- id %></span>
        </div>
        
		<div class="span1 stats">
			<% 
			if (typeof read_count_i != "undefined"){
				print('<span class="badge">', read_count_i, ' views</span>');
			}
			%>
		</div>

		<div class="clear"></div>
</div>
<div class="clear"></div>